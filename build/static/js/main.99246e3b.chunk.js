(this["webpackJsonphash-wrap"]=this["webpackJsonphash-wrap"]||[]).push([[0],{160:function(t,e,n){"use strict";n.r(e),function(t,e){var r=n(84),a=n(159),o=n(158),c=n(164),s=n(281),i=function(){var e=Object(o.a)(Object(r.a)().mark((function e(n){var o,u,p,f,h,l,b,x,w,d,k,m,g,v,y,I,T,E,A,D,O,R=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=R.length>1&&void 0!==R[1]?R[1]:{},n){e.next=3;break}throw new Error("TXID is missing");case 3:if(64===n.length&&/[0-9a-f]{64}/g.test(n)){e.next=5;break}throw new Error("Invalid TXID");case 5:return u="testnet"===o.network?"test":"main",e.next=8,s.get("https://api.whatsonchain.com/v1/bsv/".concat(u,"/tx/").concat(n,"/hex"));case 8:if(p=e.sent,f=p.data){e.next=12;break}throw new Error("Could not find transaction on WhatsOnChain: ".concat(n));case 12:return e.next=14,s.get("https://api.whatsonchain.com/v1/bsv/".concat(u,"/tx/").concat(n,"/proof"));case 14:if(h=e.sent,!(l=h.data)){e.next=20;break}return e.abrupt("return",{rawTx:f,proof:{txOrId:l[0].hash,target:l[0].merkleRoot,targetType:"merkleRoot",nodes:l[0].branches.map((function(t){return t.hash})),index:parseInt(l[0].branches.reduce((function(t,e){return t+("R"===e.pos?"0":"1")}),""),2)}});case 20:if(b="mapi.gorillapool.io",x={},w=o.taalApiKey,"testnet"!==o.network){e.next=28;break}if(w){e.next=26;break}throw new Error("Taal API key required in testnet!");case 26:if(w.startsWith("testnet_")){e.next=28;break}throw new Error("Taal API key must be a testnet key for testnet");case 28:return w&&(b="mapi.taal.com",x={headers:{Authorization:w}}),e.next=31,s.get("https://".concat(b,"/mapi/tx/").concat(n),x);case 31:if(d=e.sent,k=d.data,m=c.crypto.Hash.sha256(t.from(k.payload)),g=c.crypto.Signature.fromString(k.signature),v=c.PublicKey.fromString(k.publicKey),!0===c.crypto.ECDSA.verify(m,g,v)){e.next=38;break}throw new Error("Inalid mAPI signature for TXID: ".concat(n,", payload: ").concat(k.payload,", publicKey: ").concat(k.publicKey,", signature: ").concat(k.signature));case 38:if((y=JSON.parse(k.payload)).txid===n){e.next=41;break}throw new Error("Invalid mAPI response, expected a response for TXID ".concat(n," but got one for ").concat(y.txid," instead"));case 41:if("success"===y.returnResult){e.next=43;break}throw new Error("Invalid mAPI status response for TXID: ".concat(n,", returnResult: ").concat(y.returnResult,", resultDescription: ").concat(y.resultDescription));case 43:I={},T=new c.Transaction(f),E=Object(a.a)(T.inputs),e.prev=46,E.s();case 48:if((A=E.n()).done){e.next=58;break}if(D=A.value,O=D.prevTxId.toString("hex"),!I[O]){e.next=53;break}return e.abrupt("continue",56);case 53:return e.next=55,i(O,o);case 55:I[O]=e.sent;case 56:e.next=48;break;case 58:e.next=63;break;case 60:e.prev=60,e.t0=e.catch(46),E.e(e.t0);case 63:return e.prev=63,E.f(),e.finish(63);case 66:return e.abrupt("return",{rawTx:f,mapiResponses:[k],inputs:I});case 67:case"end":return e.stop()}}),e,null,[[46,60,63,66]])})));return function(t){return e.apply(this,arguments)}}();e.exports=i}.call(this,n(0).Buffer,n(163)(t))},166:function(t,e){},173:function(t,e){},194:function(t,e){},196:function(t,e){},207:function(t,e){},209:function(t,e){},240:function(t,e){},242:function(t,e){},249:function(t,e){},250:function(t,e){}},[[160,1,2]]]);
//# sourceMappingURL=main.99246e3b.chunk.js.map